<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<meta name="theme-color" content="#222">




  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2">























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.0.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.0.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.0.0',
    sidebar: {"position":"left","display":"hide","offset":12,"b2t":false,"scrollpercent":true,"onmobile":true},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  





 <script>(function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/b6dbddb6.js","daovoice")
 daovoice('init', {
  app_id: "0239fb5b"
});
daovoice('update');
 </script>


  <meta name="description" content="[toc] 一、为什么要学习数据库 1、持久化数据到本地。 2、可以实现结构化查询，方便管理。   二、数据库的相关概念DBMS、DB、SQL  1、DB：数据库，保存一组有组织的数据的容器。 2、DBMS：数据库管理系统，又称为数据库软件（产品），用于管理DB中的数据。 3、SQL:结构化查询语言，用于和DBMS通信的语言。   三、数据库存储数据的特点 1、数据存放到表中，然后表再放到库中。">
<meta name="keywords" content="MySQL基础">
<meta property="og:type" content="article">
<meta property="og:title" content="一、MySQL 基础">
<meta property="og:url" content="http://pengguozhen.github.io/MySQL基础.html">
<meta property="og:site_name" content="Ta的笑很甜">
<meta property="og:description" content="[toc] 一、为什么要学习数据库 1、持久化数据到本地。 2、可以实现结构化查询，方便管理。   二、数据库的相关概念DBMS、DB、SQL  1、DB：数据库，保存一组有组织的数据的容器。 2、DBMS：数据库管理系统，又称为数据库软件（产品），用于管理DB中的数据。 3、SQL:结构化查询语言，用于和DBMS通信的语言。   三、数据库存储数据的特点 1、数据存放到表中，然后表再放到库中。">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-04-28T03:47:29.899Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="一、MySQL 基础">
<meta name="twitter:description" content="[toc] 一、为什么要学习数据库 1、持久化数据到本地。 2、可以实现结构化查询，方便管理。   二、数据库的相关概念DBMS、DB、SQL  1、DB：数据库，保存一组有组织的数据的容器。 2、DBMS：数据库管理系统，又称为数据库软件（产品），用于管理DB中的数据。 3、SQL:结构化查询语言，用于和DBMS通信的语言。   三、数据库存储数据的特点 1、数据存放到表中，然后表再放到库中。">



  <link rel="alternate" href="/atom.xml" title="Ta的笑很甜" type="application/atom+xml">




  <link rel="canonical" href="http://pengguozhen.github.io/MySQL基础.html">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>一、MySQL 基础 | Ta的笑很甜</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

<div class="bg_content">
<canvas id="canvas"></canvas>
</div>

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
	<a href="https://github.com/pengguozhen" class="github-corner" aria-label="View source on GitHub"><svg width="91" height="91" viewbox="0 0 250 250" style="fill:#64CEAA; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Ta的笑很甜</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <h1 class="site-subtitle" itemprop="description">你好</h1>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签<span class="badge">8</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类<span class="badge">8</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档<span class="badge">17</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-top">

    
    
    
      
    

    
      
    

    <a href="/top/" rel="section"><i class="menu-item-icon fa fa-fw fa-signal"></i> <br>TopX</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pengguozhen.github.io/MySQL基础.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ta 的笑很甜">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ta的笑很甜">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">一、MySQL 基础

              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-04-28 11:47:29" itemprop="dateCreated datePublished" datetime="2019-04-28T11:47:29+08:00">2019-04-28</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/MySQL基础/" itemprop="url" rel="index"><span itemprop="name">MySQL基础</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/MySQL基础.html" class="leancloud_visitors" data-flag-title="一、MySQL 基础">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
				<span>℃</span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>[toc]</p>
<h5 id="一、为什么要学习数据库"><a href="#一、为什么要学习数据库" class="headerlink" title="一、为什么要学习数据库"></a>一、为什么要学习数据库</h5><ul>
<li>1、持久化数据到本地。</li>
<li>2、可以实现结构化查询，方便管理。</li>
</ul>
<hr>
<h5 id="二、数据库的相关概念"><a href="#二、数据库的相关概念" class="headerlink" title="二、数据库的相关概念"></a>二、数据库的相关概念</h5><p><strong>DBMS、DB、SQL</strong></p>
<ul>
<li>1、DB：数据库，保存一组有组织的数据的容器。</li>
<li>2、DBMS：数据库管理系统，又称为数据库软件（产品），用于管理DB中的数据。</li>
<li>3、SQL:结构化查询语言，用于和DBMS通信的语言。</li>
</ul>
<hr>
<h5 id="三、数据库存储数据的特点"><a href="#三、数据库存储数据的特点" class="headerlink" title="三、数据库存储数据的特点"></a>三、数据库存储数据的特点</h5><ul>
<li>1、数据存放到表中，然后表再放到库中。</li>
<li>2、一个库中可以有多张表，每张表具有唯一的表名用来标识自己。</li>
<li>3、表中有一个或多个列，列又称为“字段”，相当于java中“属性”。</li>
<li>4、表中的每一行数据，相当于java中“对象”。</li>
</ul>
<hr>
<h5 id="四、初始-MySQL"><a href="#四、初始-MySQL" class="headerlink" title="四、初始 MySQL"></a>四、初始 MySQL</h5><h6 id="4-2、MySQL-产品的介绍"><a href="#4-2、MySQL-产品的介绍" class="headerlink" title="4-2、MySQL 产品的介绍"></a>4-2、MySQL 产品的介绍</h6><ul>
<li>1、MySQL 的背景<ul>
<li>前身属于瑞典的一家公司，MySQL AB。</li>
<li>08 年被 sun 公司收购。</li>
<li>09 年 sun 被 oracle 收购。</li>
</ul>
</li>
<li>2、MySQL 的优点<ul>
<li>1、开源、免费、成本低。</li>
<li>2、性能高、移植性也好。</li>
<li>3、体积小，便于安装。</li>
</ul>
</li>
</ul>
<h6 id="4-3、MySQL-产品的安装-★"><a href="#4-3、MySQL-产品的安装-★" class="headerlink" title="4-3、MySQL 产品的安装          ★"></a>4-3、MySQL 产品的安装          ★</h6><ul>
<li>1、属于c/s架构的软件，一般来讲安装服务端。<ul>
<li>企业版。</li>
<li>社区版(5.5、5.6、5.7、8.0)。</li>
</ul>
</li>
</ul>
<h6 id="4-4、MySQL-服务的启动和停止-★"><a href="#4-4、MySQL-服务的启动和停止-★" class="headerlink" title="4-4、MySQL 服务的启动和停止     ★"></a>4-4、MySQL 服务的启动和停止     ★</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">方式一：计算机——右击管理——服务</span><br><span class="line"></span><br><span class="line">方式二：通过管理员身份运行</span><br><span class="line">	net start 服务名（启动服务）</span><br><span class="line">	net stop 服务名（停止服务）</span><br></pre></td></tr></table></figure>
<h6 id="4-5、MySQL-服务的登录和退出-★"><a href="#4-5、MySQL-服务的登录和退出-★" class="headerlink" title="4-5、MySQL 服务的登录和退出     ★"></a>4-5、MySQL 服务的登录和退出     ★</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">方式一：通过mysql自带的客户端</span><br><span class="line">	只限于root用户</span><br><span class="line"></span><br><span class="line">方式二：通过windows自带的客户端</span><br><span class="line">	登录：</span><br><span class="line">	mysql 【-h主机名 -P端口号 】-u用户名 -p密码</span><br><span class="line"></span><br><span class="line">	退出：</span><br><span class="line">	exit或ctrl+C</span><br></pre></td></tr></table></figure>
<h6 id="4-6、MySQL-的常见命令和语法规范"><a href="#4-6、MySQL-的常见命令和语法规范" class="headerlink" title="4-6、MySQL 的常见命令和语法规范"></a>4-6、MySQL 的常见命令和语法规范</h6><p><strong>常见命令</strong><br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.查看当前所有的数据库。</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">databases</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.打开指定的库。</span></span><br><span class="line"><span class="keyword">use</span> 库名</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3.查看当前库的所有表。</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4.查看其它库的所有表。</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span> <span class="keyword">from</span> 库名;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5.创建表。</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名(</span><br><span class="line"></span><br><span class="line">	列名 列类型,</span><br><span class="line">	列名 列类型，</span><br><span class="line">	。。。</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 6.查看表结构。</span></span><br><span class="line">desc 表名;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 7.查看服务器的版本。</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">version</span>();<span class="comment">-- 方式一：登录到mysql服务端。</span></span><br><span class="line">mysql <span class="comment">-- version;或 mysql --V;-- 方式二：没有登录到mysql服务端。</span></span><br></pre></td></tr></table></figure></p>
<p><strong>语法规范</strong><br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>不区分大小写,但建议关键字大写，表名、列名小写。</span><br><span class="line"><span class="number">2.</span>每条命令最好用分号结尾。</span><br><span class="line"><span class="number">3.</span>每条命令根据需要，可以进行缩进 或换行。</span><br><span class="line"><span class="number">4.</span>注释。</span><br><span class="line">	单行注释：#注释文字</span><br><span class="line">	单行注释：-- 注释文字</span><br><span class="line">	多行注释：<span class="comment">/* 注释文字  */</span></span><br></pre></td></tr></table></figure></p>
<h6 id="4-7、SQL-的语言分类。"><a href="#4-7、SQL-的语言分类。" class="headerlink" title="4-7、SQL 的语言分类。"></a>4-7、SQL 的语言分类。</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">DQL（Data Query Language）：数据查询语言</span><br><span class="line">	<span class="keyword">select</span> </span><br><span class="line">DML(<span class="keyword">Data</span> Manipulate <span class="keyword">Language</span>):数据操作语言</span><br><span class="line">	<span class="keyword">insert</span> 、<span class="keyword">update</span>、<span class="keyword">delete</span></span><br><span class="line"><span class="keyword">DDL</span>（<span class="keyword">Data</span> <span class="keyword">Define</span> Languge）：数据定义语言</span><br><span class="line">	<span class="keyword">create</span>、<span class="keyword">drop</span>、<span class="keyword">alter</span></span><br><span class="line">TCL（<span class="keyword">Transaction</span> Control <span class="keyword">Language</span>）：事务控制语言</span><br><span class="line">	<span class="keyword">commit</span>、<span class="keyword">rollback</span></span><br></pre></td></tr></table></figure>
<hr>
<h5 id="五、DQL语言的学习-★"><a href="#五、DQL语言的学习-★" class="headerlink" title="五、DQL语言的学习   ★"></a>五、DQL语言的学习   ★</h5><h6 id="5-1、基础查询-★"><a href="#5-1、基础查询-★" class="headerlink" title="5-1、基础查询        ★"></a>5-1、基础查询        ★</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line"><span class="keyword">SELECT</span> 要查询的东西</span><br><span class="line">【<span class="keyword">FROM</span> 表名】;</span><br><span class="line"></span><br><span class="line">类似于Java中 :System.out.println(要打印的东西);</span><br><span class="line">特点：</span><br><span class="line">①通过<span class="keyword">select</span>查询完的结果 ，是一个虚拟的表格，不是真实存在。</span><br><span class="line">②要查询的东西 可以是常量值、可以是表达式、可以是字段、可以是函数  。</span><br></pre></td></tr></table></figure>
<h6 id="5-2、条件查询-★"><a href="#5-2、条件查询-★" class="headerlink" title="5-2、条件查询         ★"></a>5-2、条件查询         ★</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">条件查询：根据条件过滤原始表的数据，查询到想要的数据</span><br><span class="line">语法：</span><br><span class="line">select </span><br><span class="line">	要查询的字段|表达式|常量值|函数</span><br><span class="line">from </span><br><span class="line">	表</span><br><span class="line">where </span><br><span class="line">	条件 ;</span><br><span class="line"></span><br><span class="line">分类：</span><br><span class="line">一、条件表达式</span><br><span class="line">	示例：salary&gt;10000</span><br><span class="line">	条件运算符：</span><br><span class="line">	&gt; &lt; &gt;= &lt;= = != &lt;&gt;</span><br><span class="line"></span><br><span class="line">二、逻辑表达式</span><br><span class="line">示例：salary&gt;10000 &amp;&amp; salary&lt;20000</span><br><span class="line"></span><br><span class="line">逻辑运算符：</span><br><span class="line"></span><br><span class="line">	and（&amp;&amp;）:两个条件如果同时成立，结果为true，否则为false</span><br><span class="line">	or(||)：两个条件只要有一个成立，结果为true，否则为false</span><br><span class="line">	not(!)：如果条件成立，则not后为false，否则为true</span><br><span class="line"></span><br><span class="line">三、模糊查询</span><br><span class="line">示例：last_name like &apos;a%&apos;</span><br></pre></td></tr></table></figure>
<h6 id="5-3、排序查询-★"><a href="#5-3、排序查询-★" class="headerlink" title="5-3、排序查询         ★"></a>5-3、排序查询         ★</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">select</span><br><span class="line">	要查询的东西</span><br><span class="line">from</span><br><span class="line">	表</span><br><span class="line">where </span><br><span class="line">	条件</span><br><span class="line"></span><br><span class="line">order by 排序的字段|表达式|函数|别名 【asc|desc】</span><br></pre></td></tr></table></figure>
<h6 id="5-4、常见函数-★"><a href="#5-4、常见函数-★" class="headerlink" title="5-4、常见函数        ★"></a>5-4、常见函数        ★</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">一、单行函数</span><br><span class="line">1、字符函数</span><br><span class="line">	concat拼接</span><br><span class="line">	substr截取子串</span><br><span class="line">	upper转换成大写</span><br><span class="line">	lower转换成小写</span><br><span class="line">	trim去前后指定的空格和字符</span><br><span class="line">	ltrim去左边空格</span><br><span class="line">	rtrim去右边空格</span><br><span class="line">	replace替换</span><br><span class="line">	lpad左填充</span><br><span class="line">	rpad右填充</span><br><span class="line">	instr返回子串第一次出现的索引</span><br><span class="line">	length 获取字节个数</span><br><span class="line">	</span><br><span class="line">2、数学函数</span><br><span class="line">	round 四舍五入</span><br><span class="line">	rand 随机数</span><br><span class="line">	floor向下取整</span><br><span class="line">	ceil向上取整</span><br><span class="line">	mod取余</span><br><span class="line">	truncate截断</span><br><span class="line">3、日期函数</span><br><span class="line">	now当前系统日期+时间</span><br><span class="line">	curdate当前系统日期</span><br><span class="line">	curtime当前系统时间</span><br><span class="line">	str_to_date 将字符转换成日期</span><br><span class="line">	date_format将日期转换成字符</span><br><span class="line">4、流程控制函数</span><br><span class="line">	if 处理双分支</span><br><span class="line">	case语句 处理多分支</span><br><span class="line">		情况1：处理等值判断</span><br><span class="line">		情况2：处理条件判断</span><br><span class="line">	</span><br><span class="line">5、其他函数</span><br><span class="line">	version版本</span><br><span class="line">	database当前库</span><br><span class="line">	user当前连接用户</span><br></pre></td></tr></table></figure>
<h6 id="5-5、分组函数-★"><a href="#5-5、分组函数-★" class="headerlink" title="5-5、分组函数        ★"></a>5-5、分组函数        ★</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">sum 求和</span><br><span class="line">max 最大值</span><br><span class="line">min 最小值</span><br><span class="line">avg 平均值</span><br><span class="line">count 计数</span><br><span class="line"></span><br><span class="line">特点：</span><br><span class="line">1、以上五个分组函数都忽略null值，除了count(*)</span><br><span class="line">2、sum和avg一般用于处理数值型</span><br><span class="line">	max、min、count可以处理任何数据类型</span><br><span class="line">3、都可以搭配distinct使用，用于统计去重后的结果</span><br><span class="line">4、count的参数可以支持：</span><br><span class="line">	字段、*、常量值，一般放1</span><br><span class="line"></span><br><span class="line">   建议使用 count(*)</span><br></pre></td></tr></table></figure>
<h6 id="5-6、分组查询-★"><a href="#5-6、分组查询-★" class="headerlink" title="5-6、分组查询           ★"></a>5-6、分组查询           ★</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">select 查询的字段，分组函数</span><br><span class="line">from 表</span><br><span class="line">group by 分组的字段</span><br><span class="line"></span><br><span class="line">特点：</span><br><span class="line">1、可以按单个字段分组</span><br><span class="line">2、和分组函数一同查询的字段最好是分组后的字段</span><br><span class="line">3、分组筛选</span><br><span class="line">		针对的表	位置			关键字</span><br><span class="line">分组前筛选：	原始表		group by的前面		where</span><br><span class="line">分组后筛选：	分组后的结果集	group by的后面		having</span><br><span class="line"></span><br><span class="line">4、可以按多个字段分组，字段之间用逗号隔开</span><br><span class="line">5、可以支持排序</span><br><span class="line">6、having后可以支持别名</span><br></pre></td></tr></table></figure>
<h6 id="5-7、连接查询-★"><a href="#5-7、连接查询-★" class="headerlink" title="5-7、连接查询         ★"></a>5-7、连接查询         ★</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">笛卡尔乘积：如果连接条件省略或无效则会出现</span><br><span class="line">解决办法：添加上连接条件。</span><br></pre></td></tr></table></figure>
<p><strong>一、传统模式下的连接 ：等值连接——非等值连接。</strong></p>
<ul>
<li>1.等值连接的结果 = 多个表的交集。</li>
<li>2.n表连接，至少需要n-1个连接条件。</li>
<li>3.多个表不分主次，没有顺序要求。</li>
<li>4.一般为表起别名，提高阅读性和性能。</li>
</ul>
<p><strong>二、sql99语法：通过join关键字实现连接。</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">含义：1999年推出的sql语法</span><br><span class="line">支持：</span><br><span class="line">等值连接、非等值连接 （内连接）</span><br><span class="line">外连接</span><br><span class="line">交叉连接</span><br><span class="line"></span><br><span class="line">语法：</span><br><span class="line"></span><br><span class="line">select 字段，...</span><br><span class="line">from 表1</span><br><span class="line">【inner|left outer|right outer|cross】join 表2 on  连接条件</span><br><span class="line">【inner|left outer|right outer|cross】join 表3 on  连接条件</span><br><span class="line">【where 筛选条件】</span><br><span class="line">【group by 分组字段】</span><br><span class="line">【having 分组后的筛选条件】</span><br><span class="line">【order by 排序的字段或表达式】</span><br><span class="line"></span><br><span class="line">好处：语句上，连接条件和筛选条件实现了分离，简洁明了！</span><br></pre></td></tr></table></figure>
<p><strong>三、自连接</strong><br>案例：查询员工名和直接上级的名称</p>
<p>sql99</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT e.last_name,m.last_name</span><br><span class="line">	FROM employees e</span><br><span class="line">	JOIN employees m ON e.`manager_id`=m.`employee_id`;</span><br></pre></td></tr></table></figure>
<p>sql92</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT e.last_name,m.last_name</span><br><span class="line">	FROM employees e,employees m </span><br><span class="line">	WHERE e.`manager_id`=m.`employee_id`;</span><br></pre></td></tr></table></figure>
<h6 id="5-8、子查询-√"><a href="#5-8、子查询-√" class="headerlink" title="5-8、子查询       √"></a>5-8、子查询       √</h6><p><strong>含义：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">一条查询语句中又嵌套了另一条完整的select语句，其中被嵌套的select语句，称为子查询或内查询在外面的查询语句，称为主查询或外查询。</span><br></pre></td></tr></table></figure>
<p><strong>特点：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1、子查询都放在小括号内</span><br><span class="line">2、子查询可以放在from后面、select后面、where后面、having后面，但一般放在条件的右侧</span><br><span class="line">3、子查询优先于主查询执行，主查询使用了子查询的执行结果</span><br><span class="line">4、子查询根据查询结果的行数不同分为以下两类：</span><br><span class="line">① 单行子查询</span><br><span class="line">	结果集只有一行</span><br><span class="line">	一般搭配单行操作符使用：&gt; &lt; = &lt;&gt; &gt;= &lt;= </span><br><span class="line">	非法使用子查询的情况：</span><br><span class="line">	a、子查询的结果为一组值</span><br><span class="line">	b、子查询的结果为空</span><br><span class="line">	</span><br><span class="line">② 多行子查询</span><br><span class="line">	结果集有多行</span><br><span class="line">	一般搭配多行操作符使用：any、all、in、not in</span><br><span class="line">	in： 属于子查询结果中的任意一个就行</span><br><span class="line">	any和all往往可以用其他查询代替</span><br></pre></td></tr></table></figure>
<h6 id="5-9、分页查询-★"><a href="#5-9、分页查询-★" class="headerlink" title="5-9、分页查询       ★"></a>5-9、分页查询       ★</h6><p><strong>应用场景：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">实际的web项目中需要根据用户的需求提交对应的分页查询的sql语句。</span><br></pre></td></tr></table></figure>
<p><strong>语法：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select 字段|表达式,...</span><br><span class="line"><span class="keyword">from</span> 表</span><br><span class="line">【where 条件】</span><br><span class="line">【group by 分组字段】</span><br><span class="line">【having 条件】</span><br><span class="line">【order by 排序的字段】</span><br><span class="line">limit 【起始的条目索引，】条目数;</span><br></pre></td></tr></table></figure>
<p><strong>特点：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>起始条目索引从<span class="number">0</span>开始</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>limit子句放在查询语句的最后</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>公式：select * <span class="keyword">from</span>  表 limit （page<span class="number">-1</span>）*sizePerPage,sizePerPage</span><br><span class="line">假如:</span><br><span class="line">每页显示条目数sizePerPage</span><br><span class="line">要显示的页数 page</span><br></pre></td></tr></table></figure>
<h6 id="5-10、union联合查询-√"><a href="#5-10、union联合查询-√" class="headerlink" title="5-10、union联合查询    √"></a>5-10、union联合查询    √</h6><p><strong>引入：</strong><br>    union 联合、合并</p>
<p><strong>语法：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select 字段|常量|表达式|函数 【from 表】 【where 条件】 union 【all】</span><br><span class="line">select 字段|常量|表达式|函数 【from 表】 【where 条件】 union 【all】</span><br><span class="line">select 字段|常量|表达式|函数 【from 表】 【where 条件】 union  【all】</span><br><span class="line">.....</span><br><span class="line">select 字段|常量|表达式|函数 【from 表】 【where 条件】</span><br></pre></td></tr></table></figure>
<p><strong>特点：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1、多条查询语句的查询的列数必须是一致的</span><br><span class="line">2、多条查询语句的查询的列的类型几乎相同</span><br><span class="line">3、union代表去重，union all代表不去重</span><br></pre></td></tr></table></figure>
<hr>
<h5 id="六、DML语言的学习-★"><a href="#六、DML语言的学习-★" class="headerlink" title="六、DML语言的学习    ★"></a>六、DML语言的学习    ★</h5><h6 id="6-2、插入语句"><a href="#6-2、插入语句" class="headerlink" title="6-2、插入语句"></a>6-2、插入语句</h6><p><strong>语法：</strong><br>    insert into 表名(字段名，…)<br>    values(值1，…);</p>
<p><strong>特点：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1、字段类型和值类型一致或兼容，而且一一对应。</span><br><span class="line">2、可以为空的字段，可以不用插入值，或用null填充。</span><br><span class="line">3、不可以为空的字段，必须插入值。</span><br><span class="line">4、字段个数和值的个数必须一致。</span><br><span class="line">5、字段可以省略，但默认所有字段，并且顺序和表中的存储顺序一致	。</span><br></pre></td></tr></table></figure>
<h6 id="6-3、修改语句"><a href="#6-3、修改语句" class="headerlink" title="6-3、修改语句"></a>6-3、修改语句</h6><p><strong>修改单表语法：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 字段=新值,字段=新值</span><br><span class="line">【<span class="keyword">where</span> 条件】</span><br></pre></td></tr></table></figure>
<p><strong>修改多表语法：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> 表<span class="number">1</span> 别名<span class="number">1</span>,表<span class="number">2</span> 别名<span class="number">2</span></span><br><span class="line">	<span class="keyword">set</span> 字段=新值，字段=新值</span><br><span class="line">	<span class="keyword">where</span> 连接条件</span><br><span class="line">	<span class="keyword">and</span> 筛选条件</span><br></pre></td></tr></table></figure>
<ul>
<li style="list-style: none"><input type="checkbox"> 1、如何对一张表的数据进行批量更新？</li>
</ul>
<h6 id="6-4、删除语句"><a href="#6-4、删除语句" class="headerlink" title="6-4、删除语句"></a>6-4、删除语句</h6><p><strong>方式1：delete语句</strong> </p>
<p><strong>1、单表的删除： ★</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表名 【<span class="keyword">where</span> 筛选条件】</span><br></pre></td></tr></table></figure>
<p><strong>2、多表的删除：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> 别名<span class="number">1</span>，别名<span class="number">2</span></span><br><span class="line"><span class="keyword">from</span> 表<span class="number">1</span> 别名<span class="number">1</span>，表<span class="number">2</span> 别名<span class="number">2</span></span><br><span class="line"><span class="keyword">where</span> 连接条件</span><br><span class="line"><span class="keyword">and</span> 筛选条件;</span><br></pre></td></tr></table></figure>
<p><strong>方式2：truncate语句</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> 表名</span><br></pre></td></tr></table></figure>
<p><strong>两种方式的区别【面试题】</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>1.truncate不能加where条件，而delete可以加where条件。</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>2.truncate的效率高一丢丢。</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>3.truncate 删除带自增长的列的表后，如果再插入数据，数据从1开始。</span><br><span class="line"><span class="meta">#</span>delete 删除带自增长列的表后，如果再插入数据，数据从上一次的断点处开始。</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>4.truncate删除不能回滚，delete删除可以回滚。</span><br></pre></td></tr></table></figure>
<hr>
<h5 id="七、DDL语言的学习"><a href="#七、DDL语言的学习" class="headerlink" title="七、DDL语言的学习"></a>七、DDL语言的学习</h5><h6 id="7-1、库和表的管理-√"><a href="#7-1、库和表的管理-√" class="headerlink" title="7-1、库和表的管理     √"></a>7-1、库和表的管理     √</h6><p><strong>库的管理：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">一、创建库</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> 库名</span><br><span class="line">二、删除库</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">database</span> 库名</span><br></pre></td></tr></table></figure>
<p><strong>表的管理：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">#1.创建表</span><br><span class="line">CREATE TABLE IF NOT EXISTS stuinfo(</span><br><span class="line">	stuId INT,</span><br><span class="line">	stuName VARCHAR(20),</span><br><span class="line">	gender CHAR,</span><br><span class="line">	bornDate DATETIME</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">DESC studentinfo;</span><br><span class="line"></span><br><span class="line">#2.修改表 alter</span><br><span class="line">语法：ALTER TABLE 表名 ADD|MODIFY|DROP|CHANGE COLUMN 字段名 【字段类型】;</span><br><span class="line"></span><br><span class="line">#①修改字段名</span><br><span class="line">ALTER TABLE studentinfo CHANGE  COLUMN sex gender CHAR;</span><br><span class="line"></span><br><span class="line">#②修改表名</span><br><span class="line">ALTER TABLE stuinfo RENAME [TO]  studentinfo;</span><br><span class="line">#③修改字段类型和列级约束</span><br><span class="line">ALTER TABLE studentinfo MODIFY COLUMN borndate DATE ;</span><br><span class="line"></span><br><span class="line">#④添加字段</span><br><span class="line"></span><br><span class="line">ALTER TABLE studentinfo ADD COLUMN email VARCHAR(20) first;</span><br><span class="line">#⑤删除字段</span><br><span class="line">ALTER TABLE studentinfo DROP COLUMN email;</span><br><span class="line"></span><br><span class="line">#3.删除表</span><br><span class="line"></span><br><span class="line">DROP TABLE [IF EXISTS] studentinfo;</span><br></pre></td></tr></table></figure>
<h6 id="7-2、常见数据类型介绍-√"><a href="#7-2、常见数据类型介绍-√" class="headerlink" title="7-2、常见数据类型介绍  √"></a>7-2、常见数据类型介绍  √</h6><ul>
<li>整型：</li>
<li>小数：<ul>
<li>浮点型</li>
<li>定点型</li>
</ul>
</li>
<li>字符型：</li>
<li>日期型：</li>
<li>Blob类型：</li>
</ul>
<h6 id="7-3、常见约束-√"><a href="#7-3、常见约束-√" class="headerlink" title="7-3、常见约束        √"></a>7-3、常见约束        √</h6><ul>
<li>NOT NULL</li>
<li>DEFAULT</li>
<li>UNIQUE</li>
<li>CHECK</li>
<li>PRIMARY KEY</li>
<li>FOREIGN KEY</li>
</ul>
<hr>
<h5 id="八、TCL语言的学习"><a href="#八、TCL语言的学习" class="headerlink" title="八、TCL语言的学习"></a>八、TCL语言的学习</h5><p>事务和事务处理<br><strong>含义：</strong><br>通过一组逻辑操作单元（一组DML——sql语句），将数据从一种状态切换到另外一种状态<br><strong>特点：</strong><br>（ACID）</p>
<ul>
<li>原子性：要么都执行，要么都回滚。</li>
<li>一致性：保证数据的状态操作前和操作后保持一致。（比如：钱的总额一定，分布式数据库中数据存储保持一致性。）</li>
<li>隔离性：多个事务同时操作相同数据库的同一个数据时，一个事务的执行不受另外一个事务的干扰。</li>
<li>持久性：一个事务一旦提交，则数据将持久化到本地，除非其他事务对其进行修改。<h6 id="8-1、事务的分类"><a href="#8-1、事务的分类" class="headerlink" title="8-1、事务的分类"></a>8-1、事务的分类</h6></li>
<li>隐式事务，没有明显的开启和结束事务的标志。</li>
</ul>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">比如</span><br><span class="line"><span class="keyword">insert</span>、<span class="keyword">update</span>、<span class="keyword">delete</span>语句本身就是一个事务。</span><br><span class="line">- 显式事务，具有明显的开启和结束事务的标志。</span><br></pre></td></tr></table></figure>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、开启事务</span><br><span class="line">取消自动提交事务的功能</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、编写事务的一组逻辑操作单元（多条sql语句）</span><br><span class="line"><span class="keyword">insert</span></span><br><span class="line"><span class="keyword">update</span></span><br><span class="line"><span class="keyword">delete</span></span><br><span class="line"></span><br><span class="line"><span class="number">3</span>、提交事务或回滚事务</span><br></pre></td></tr></table></figure>
<h6 id="8-2、使用到的关键字"><a href="#8-2、使用到的关键字" class="headerlink" title="8-2、使用到的关键字"></a>8-2、使用到的关键字</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> autocommit=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">start</span> <span class="keyword">transaction</span>;</span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"><span class="keyword">rollback</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">savepoint</span>  断点</span><br><span class="line"><span class="keyword">commit</span> <span class="keyword">to</span> 断点</span><br><span class="line"><span class="keyword">rollback</span> <span class="keyword">to</span> 断点</span><br></pre></td></tr></table></figure>
<h6 id="8-3、事务的隔离级别"><a href="#8-3、事务的隔离级别" class="headerlink" title="8-3、事务的隔离级别"></a>8-3、事务的隔离级别</h6><ul>
<li>1、事务并发问题如何发生？<br>当多个事务同时操作同一个数据库的相同数据时。</li>
<li>2、事务的并发问题有哪些？<ul>
<li>脏读：一个事务读取到了另外一个事务未提交的数据。</li>
<li>不可重复读：同一个事务中，多次读取到的数据不一致。</li>
<li>幻读：一个事务读取数据时，另外一个事务进行更新，导致第一个事务读取到了没有更新的数据。</li>
</ul>
</li>
<li>3、如何避免事务的并发问题？</li>
</ul>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">通过设置事务的隔离级别</span><br><span class="line"><span class="number">1</span>、READ UNCOMMITTED。</span><br><span class="line"><span class="number">2</span>、READ COMMITTED 可以避免脏读。</span><br><span class="line"><span class="number">3</span>、REPEATABLE READ 可以避免脏读、不可重复读和一部分幻读。</span><br><span class="line"><span class="number">4</span>、SERIALIZABLE可以避免脏读、不可重复读和幻读。</span><br></pre></td></tr></table></figure>
<ul>
<li>4、设置隔离级别：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">session</span>|<span class="keyword">global</span>  <span class="keyword">transaction</span> <span class="keyword">isolation</span> <span class="keyword">level</span> 隔离级别名;</span><br></pre></td></tr></table></figure>
<ul>
<li>5、查看隔离级别：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> @@tx_isolation;</span><br></pre></td></tr></table></figure>
<hr>
<h5 id="九、视图的讲解-√"><a href="#九、视图的讲解-√" class="headerlink" title="九、视图的讲解           √"></a>九、视图的讲解           √</h5><ul>
<li><strong>含义</strong>：理解成一张虚拟的表。</li>
<li><strong>视图和表的区别</strong>：</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>使用方式</th>
<th>占用物理空间</th>
</tr>
</thead>
<tbody>
<tr>
<td>视图</td>
<td>完全相同</td>
<td>不占用，仅仅保存的是sql逻辑</td>
</tr>
<tr>
<td>表</td>
<td>完全相同</td>
<td>占用</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>视图的好处</strong>：<ul>
<li>1、sql语句提高重用性，效率高。</li>
<li>2、和表实现了分离，提高了安全性。<h6 id="9-1、视图的创建"><a href="#9-1、视图的创建" class="headerlink" title="9-1、视图的创建"></a>9-1、视图的创建</h6></li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">CREATE VIEW  视图名</span><br><span class="line">AS</span><br><span class="line">查询语句;</span><br></pre></td></tr></table></figure>
<h6 id="9-2、视图的增删改查"><a href="#9-2、视图的增删改查" class="headerlink" title="9-2、视图的增删改查"></a>9-2、视图的增删改查</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1、查看视图的数据 ★</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> my_v4;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> my_v1 <span class="keyword">WHERE</span> last_name=<span class="string">'Partners'</span>;</span><br><span class="line"></span><br><span class="line">2、插入视图的数据</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> my_v4(last_name,department_id) <span class="keyword">VALUES</span>(<span class="string">'虚竹'</span>,<span class="number">90</span>);</span><br><span class="line"></span><br><span class="line">3、修改视图的数据</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> my_v4 <span class="keyword">SET</span> last_name =<span class="string">'梦姑'</span> <span class="keyword">WHERE</span> last_name=<span class="string">'虚竹'</span>;</span><br><span class="line"></span><br><span class="line">4、删除视图的数据</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> my_v4;</span><br></pre></td></tr></table></figure>
<h6 id="9-3、某些视图不能更新"><a href="#9-3、某些视图不能更新" class="headerlink" title="9-3、某些视图不能更新"></a>9-3、某些视图不能更新</h6><p>包含以下关键字的sql语句：</p>
<ul>
<li>分组函数、distinct、group  by、having、union或者union all。</li>
<li>常量视图。</li>
<li>Select中包含子查询。</li>
<li>join</li>
<li>from一个不能更新的视图。</li>
<li>where子句的子查询引用了from子句中的表。<h6 id="9-4、视图逻辑的更新"><a href="#9-4、视图逻辑的更新" class="headerlink" title="9-4、视图逻辑的更新"></a>9-4、视图逻辑的更新</h6></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#方式一：重新创建</span><br><span class="line">CREATE OR REPLACE VIEW test_v7</span><br><span class="line">AS</span><br><span class="line">SELECT last_name FROM employees</span><br><span class="line">WHERE employee_id&gt;100;</span><br><span class="line"></span><br><span class="line">#方式二: 修改更新视图逻辑</span><br><span class="line">ALTER VIEW test_v7</span><br><span class="line">AS</span><br><span class="line">SELECT employee_id FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT * FROM test_v7;</span><br></pre></td></tr></table></figure>
<h6 id="9-5、视图的删除"><a href="#9-5、视图的删除" class="headerlink" title="9-5、视图的删除"></a>9-5、视图的删除</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP VIEW test_v1,test_v2,test_v3;</span><br></pre></td></tr></table></figure>
<h6 id="9-6、视图结构的查看"><a href="#9-6、视图结构的查看" class="headerlink" title="9-6、视图结构的查看"></a>9-6、视图结构的查看</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DESC test_v7;</span><br><span class="line">SHOW CREATE VIEW test_v7;</span><br></pre></td></tr></table></figure>
<h5 id="十、变量"><a href="#十、变量" class="headerlink" title="十、变量"></a>十、变量</h5><h6 id="10-1、系统变量"><a href="#10-1、系统变量" class="headerlink" title="10-1、系统变量"></a>10-1、系统变量</h6><ul>
<li>1、全局变量(作用域：针对于所有会话（连接）有效，但不能跨重启)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">查看所有全局变量</span><br><span class="line">SHOW GLOBAL VARIABLES;</span><br><span class="line"></span><br><span class="line">查看满足条件的部分系统变量</span><br><span class="line">SHOW GLOBAL VARIABLES LIKE &apos;%char%&apos;;</span><br><span class="line"></span><br><span class="line">查看指定的系统变量的值</span><br><span class="line">SELECT @@global.autocommit;</span><br><span class="line"></span><br><span class="line">为某个系统变量赋值</span><br><span class="line">SET @@global.autocommit=0;</span><br><span class="line">SET GLOBAL autocommit=0;</span><br></pre></td></tr></table></figure>
<ul>
<li>2、会话变量(作用域：针对于当前会话（连接）有效)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">查看所有会话变量</span><br><span class="line">SHOW SESSION VARIABLES;</span><br><span class="line"></span><br><span class="line">查看满足条件的部分会话变量</span><br><span class="line">SHOW SESSION VARIABLES LIKE &apos;%char%&apos;;</span><br><span class="line"></span><br><span class="line">查看指定的会话变量的值</span><br><span class="line">SELECT @@autocommit;</span><br><span class="line">SELECT @@session.tx_isolation;</span><br><span class="line"></span><br><span class="line">为某个会话变量赋值</span><br><span class="line">SET @@session.tx_isolation=&apos;read-uncommitted&apos;;</span><br><span class="line">SET SESSION tx_isolation=&apos;read-committed&apos;;</span><br></pre></td></tr></table></figure>
<h6 id="10-2、自定义变量"><a href="#10-2、自定义变量" class="headerlink" title="10-2、自定义变量"></a>10-2、自定义变量</h6><ul>
<li><p>1、用户变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 声明并初始化</span><br><span class="line">SET @变量名=值;</span><br><span class="line">SET @变量名:=值;</span><br><span class="line">SELECT @变量名:=值;</span><br><span class="line"></span><br><span class="line">- 赋值</span><br><span class="line"></span><br><span class="line">方式一：一般用于赋简单的值</span><br><span class="line">SET 变量名=值;</span><br><span class="line">SET 变量名:=值;</span><br><span class="line">SELECT 变量名:=值;</span><br><span class="line"></span><br><span class="line">方式二：一般用于赋表 中的字段值</span><br><span class="line">SELECT 字段名或表达式 INTO 变量</span><br><span class="line">FROM 表;</span><br><span class="line"></span><br><span class="line">- 使用</span><br><span class="line">select @变量名;</span><br></pre></td></tr></table></figure>
</li>
<li><p>2、局部变量</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">声明：</span><br><span class="line">declare 变量名 类型 【default 值】;</span><br><span class="line"></span><br><span class="line">赋值：</span><br><span class="line">方式一：一般用于赋简单的值</span><br><span class="line">SET 变量名=值;</span><br><span class="line">SET 变量名:=值;</span><br><span class="line">SELECT 变量名:=值;</span><br><span class="line"></span><br><span class="line">方式二：一般用于赋表 中的字段值</span><br><span class="line">SELECT 字段名或表达式 INTO 变量</span><br><span class="line">FROM 表;</span><br><span class="line"></span><br><span class="line">使用：</span><br><span class="line">select 变量名</span><br></pre></td></tr></table></figure>
<h6 id="10-3、系统变量和自定义变量区别"><a href="#10-3、系统变量和自定义变量区别" class="headerlink" title="10-3、系统变量和自定义变量区别"></a>10-3、系统变量和自定义变量区别</h6><table>
<thead>
<tr>
<th></th>
<th>作用域</th>
<th>定义位置</th>
<th>语法</th>
</tr>
</thead>
<tbody>
<tr>
<td>用户变量</td>
<td>当前会话</td>
<td>会话的任何地方</td>
<td>加@符号，不用指定类型</td>
</tr>
<tr>
<td>局部变量</td>
<td>定义它的BEGIN END中</td>
<td>BEGIN END的第一句话</td>
<td>一般不用加@,需要指定类型</td>
</tr>
</tbody>
</table>
<h5 id="十一、存储过程和函数"><a href="#十一、存储过程和函数" class="headerlink" title="十一、存储过程和函数"></a>十一、存储过程和函数</h5><ul>
<li><strong>含义</strong>：一组经过预先编译的sql语句的集合。</li>
<li><strong>好处</strong>：<ul>
<li>1、提高了sql语句的重用性，减少了开发程序员的压力。</li>
<li>2、提高了效率。</li>
<li>3、减少了传输次数。</li>
</ul>
</li>
<li><strong>分类</strong>：<ul>
<li>1、无返回无参。</li>
<li>2、仅仅带in类型，无返回有参。</li>
<li>3、仅仅带out类型，有返回无参。</li>
<li>4、既带in又带out，有返回有参。</li>
<li>5、带inout，有返回有参。<h6 id="11-1、创建存储过程"><a href="#11-1、创建存储过程" class="headerlink" title="11-1、创建存储过程"></a>11-1、创建存储过程</h6></li>
</ul>
</li>
<li>1、DELIMITER 关键字及语法</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql 默认以分号为语句的结束，但是在创建存储过程时 sql 语句中一般会出现多个分号。为了不让语句过早遇见分号;执行。在创建语句首行使用该关键字+特殊符号来指定其他字符为语句的结束。最后再指定 delimiter ; 恢复分号为语句结束标志。</span><br><span class="line"></span><br><span class="line">例如：</span><br><span class="line"></span><br><span class="line">DELIMITER $$ </span><br><span class="line">DROP TRIGGER IF EXISTS `updateegopriceondelete`$$ </span><br><span class="line">CREATE </span><br><span class="line">    TRIGGER `updateegopriceondelete` AFTER  DELETE ON  `customerinfo` </span><br><span class="line">    FOR EACH ROW BEGIN </span><br><span class="line">DELETE FROM egoprice  WHERE customerId=OLD.customerId; </span><br><span class="line">    END$$ </span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure>
<ul>
<li>2 、语法</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">#1、语法</span><br><span class="line">create procedure 存储过程名(in|out|inout 参数名  参数类型,...)</span><br><span class="line">begin</span><br><span class="line">	存储过程体</span><br><span class="line"></span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">#2、类似于方法</span><br><span class="line">修饰符 返回类型 方法名(参数类型 参数名,...)&#123;</span><br><span class="line"></span><br><span class="line">	方法体;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#3、注意</span><br><span class="line">1、需要设置新的结束标记</span><br><span class="line">delimiter 新的结束标记</span><br><span class="line">示例：</span><br><span class="line">delimiter $</span><br><span class="line"></span><br><span class="line">CREATE PROCEDURE 存储过程名(IN|OUT|INOUT 参数名  参数类型,...)</span><br><span class="line">BEGIN</span><br><span class="line">	sql语句1;</span><br><span class="line">	sql语句2;</span><br><span class="line"></span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">2、存储过程体中可以有多条sql语句，如果仅仅一条sql语句，则可以省略begin end</span><br><span class="line"></span><br><span class="line">3、参数前面的符号的意思</span><br><span class="line">in:该参数只能作为输入 （该参数不能做返回值）</span><br><span class="line">out：该参数只能作为输出（该参数只能做返回值）</span><br><span class="line">inout：既能做输入又能做输出</span><br></pre></td></tr></table></figure>
<h6 id="11-2、调用存储过程"><a href="#11-2、调用存储过程" class="headerlink" title="11-2、调用存储过程"></a>11-2、调用存储过程</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">call 存储过程名(实参列表)</span><br></pre></td></tr></table></figure>
<h6 id="11-3、创建函数"><a href="#11-3、创建函数" class="headerlink" title="11-3、创建函数"></a>11-3、创建函数</h6><ul>
<li>学过的函数：LENGTH、SUBSTR、CONCAT 等。</li>
<li>语法</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE FUNCTION 函数名(参数名 参数类型,...) RETURNS 返回类型</span><br><span class="line">BEGIN</span><br><span class="line">	函数体</span><br><span class="line"></span><br><span class="line">END</span><br></pre></td></tr></table></figure>
<h6 id="11-4、调用函数"><a href="#11-4、调用函数" class="headerlink" title="11-4、调用函数"></a>11-4、调用函数</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 函数名（实参列表）</span><br></pre></td></tr></table></figure>
<h6 id="11-5、函数和存储过程的区别"><a href="#11-5、函数和存储过程的区别" class="headerlink" title="11-5、函数和存储过程的区别"></a>11-5、函数和存储过程的区别</h6><table>
<thead>
<tr>
<th></th>
<th>关键字</th>
<th>调用语法</th>
<th>返回值</th>
<th>应用场景</th>
</tr>
</thead>
<tbody>
<tr>
<td>函数</td>
<td>FUNCTION</td>
<td>SELECT 函数()</td>
<td>只能是一个</td>
<td>一般用于查询结果为一个值并返回时，当有返回值而且仅仅一个</td>
</tr>
<tr>
<td>存储过程</td>
<td>PROCEDURE</td>
<td>CALL 存储过程()</td>
<td>可以有0个或多个</td>
<td>一般用于更新</td>
</tr>
</tbody>
</table>
<h5 id="十二、流程控制结构"><a href="#十二、流程控制结构" class="headerlink" title="十二、流程控制结构"></a>十二、流程控制结构</h5><h6 id="12-1、分支"><a href="#12-1、分支" class="headerlink" title="12-1、分支"></a>12-1、分支</h6><p><strong>一、if函数</strong><br>    语法：if(条件，值1，值2)<br>    特点：可以用在任何位置</p>
<p><strong>二、case语句</strong></p>
<p>语法：</p>
<pre><code>情况一：类似于switch
case 表达式
when 值1 then 结果1或语句1(如果是语句，需要加分号) 
when 值2 then 结果2或语句2(如果是语句，需要加分号)
...
else 结果n或语句n(如果是语句，需要加分号)
end 【case】（如果是放在begin end中需要加上case，如果放在select后面不需要）

情况二：类似于多重if
case 
when 条件1 then 结果1或语句1(如果是语句，需要加分号) 
when 条件2 then 结果2或语句2(如果是语句，需要加分号)
...
else 结果n或语句n(如果是语句，需要加分号)
end 【case】（如果是放在begin end中需要加上case，如果放在select后面不需要）
</code></pre><p>特点：<br>    可以用在任何位置</p>
<p><strong>三、if elseif语句</strong></p>
<p>语法：</p>
<pre><code>if 情况1 then 语句1;
elseif 情况2 then 语句2;
...
else 语句n;
end if;
</code></pre><p>特点：<br>    只能用在begin end中！！！！！！！！！！！！！！！</p>
<p>三者比较：<br>            应用场合<br>    if函数        简单双分支<br>    case结构    等值判断 的多分支<br>    if结构        区间判断 的多分支</p>
<h6 id="12-2、循环"><a href="#12-2、循环" class="headerlink" title="12-2、循环"></a>12-2、循环</h6><p><strong>语法：</strong></p>
<pre><code>【标签：】WHILE 循环条件  DO
    循环体
END WHILE 【标签】;
</code></pre><p><strong>特点：</strong></p>
<pre><code>只能放在BEGIN END里面

如果要搭配leave跳转语句，需要使用标签，否则可以不用标签

leave类似于java中的break语句，跳出所在循环！！！
</code></pre>
      
    </div>

    

    
    
    

    

    
      
    
    

    
	
	<div>
      
        
      
</div>
	
	<div>
	  
		<div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>
	  
	</div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/MySQL基础/" rel="tag"><i class="fa fa-tag"></i> MySQL基础</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/MySQL替代Oracle序列.html" rel="next" title="一、SQL 转换：Oracle 转 MySQL">
                <i class="fa fa-chevron-left"></i> 一、SQL 转换：Oracle 转 MySQL
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/Maven使用手册.html" rel="prev" title="Maven使用手册">
                Maven使用手册 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.gif" alt="Ta 的笑很甜">
            
              <p class="site-author-name" itemprop="name">Ta 的笑很甜</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">17</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">8</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">8</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/pengguozhen" title="GitHub &rarr; https://github.com/pengguozhen" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:pengguozhen5016@gmail.com" title="E-Mail &rarr; mailto:pengguozhen5016@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://weibo.com/Ta的笑很甜" title="Weibo &rarr; https://weibo.com/Ta的笑很甜" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i>Weibo</a>
                </span>
              
            </div>
          

          

          
          


		  

          
            
          
          <div id="days"></div>
<script>
function show_date_time(){
window.setTimeout("show_date_time()"， 1000);
BirthDay=new Date("02/10/2019 15:13:14");
today=new Date();
timeold=(today.getTime()-BirthDay.getTime());
sectimeold=timeold/1000
secondsold=Math.floor(sectimeold);
msPerDay=24*60*60*1000
e_daysold=timeold/msPerDay
daysold=Math.floor(e_daysold);
e_hrsold=(e_daysold-daysold)*24;
hrsold=setzero(Math.floor(e_hrsold));
e_minsold=(e_hrsold-hrsold)*60;
minsold=setzero(Math.floor((e_hrsold-hrsold)*60));
seconds=setzero(Math.floor((e_minsold-minsold)*60));
document.getElementById('days').innerHTML="已运行"+daysold+"天"+hrsold+"小时"+minsold+"分"+seconds+"秒";
}
function setzero(i){
if (i<10)
{i="0" + i};
return i;
}
show_date_time();
</script>


        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-5"><a class="nav-link" href="#一、为什么要学习数据库"><span class="nav-number">1.</span> <span class="nav-text">一、为什么要学习数据库</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#二、数据库的相关概念"><span class="nav-number">2.</span> <span class="nav-text">二、数据库的相关概念</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#三、数据库存储数据的特点"><span class="nav-number">3.</span> <span class="nav-text">三、数据库存储数据的特点</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#四、初始-MySQL"><span class="nav-number">4.</span> <span class="nav-text">四、初始 MySQL</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#4-2、MySQL-产品的介绍"><span class="nav-number">4.1.</span> <span class="nav-text">4-2、MySQL 产品的介绍</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-3、MySQL-产品的安装-★"><span class="nav-number">4.2.</span> <span class="nav-text">4-3、MySQL 产品的安装          ★</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-4、MySQL-服务的启动和停止-★"><span class="nav-number">4.3.</span> <span class="nav-text">4-4、MySQL 服务的启动和停止     ★</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-5、MySQL-服务的登录和退出-★"><span class="nav-number">4.4.</span> <span class="nav-text">4-5、MySQL 服务的登录和退出     ★</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-6、MySQL-的常见命令和语法规范"><span class="nav-number">4.5.</span> <span class="nav-text">4-6、MySQL 的常见命令和语法规范</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-7、SQL-的语言分类。"><span class="nav-number">4.6.</span> <span class="nav-text">4-7、SQL 的语言分类。</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#五、DQL语言的学习-★"><span class="nav-number">5.</span> <span class="nav-text">五、DQL语言的学习   ★</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#5-1、基础查询-★"><span class="nav-number">5.1.</span> <span class="nav-text">5-1、基础查询        ★</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-2、条件查询-★"><span class="nav-number">5.2.</span> <span class="nav-text">5-2、条件查询         ★</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-3、排序查询-★"><span class="nav-number">5.3.</span> <span class="nav-text">5-3、排序查询         ★</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-4、常见函数-★"><span class="nav-number">5.4.</span> <span class="nav-text">5-4、常见函数        ★</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-5、分组函数-★"><span class="nav-number">5.5.</span> <span class="nav-text">5-5、分组函数        ★</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-6、分组查询-★"><span class="nav-number">5.6.</span> <span class="nav-text">5-6、分组查询           ★</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-7、连接查询-★"><span class="nav-number">5.7.</span> <span class="nav-text">5-7、连接查询         ★</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-8、子查询-√"><span class="nav-number">5.8.</span> <span class="nav-text">5-8、子查询       √</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-9、分页查询-★"><span class="nav-number">5.9.</span> <span class="nav-text">5-9、分页查询       ★</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-10、union联合查询-√"><span class="nav-number">5.10.</span> <span class="nav-text">5-10、union联合查询    √</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#六、DML语言的学习-★"><span class="nav-number">6.</span> <span class="nav-text">六、DML语言的学习    ★</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#6-2、插入语句"><span class="nav-number">6.1.</span> <span class="nav-text">6-2、插入语句</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#6-3、修改语句"><span class="nav-number">6.2.</span> <span class="nav-text">6-3、修改语句</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#6-4、删除语句"><span class="nav-number">6.3.</span> <span class="nav-text">6-4、删除语句</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#七、DDL语言的学习"><span class="nav-number">7.</span> <span class="nav-text">七、DDL语言的学习</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#7-1、库和表的管理-√"><span class="nav-number">7.1.</span> <span class="nav-text">7-1、库和表的管理     √</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#7-2、常见数据类型介绍-√"><span class="nav-number">7.2.</span> <span class="nav-text">7-2、常见数据类型介绍  √</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#7-3、常见约束-√"><span class="nav-number">7.3.</span> <span class="nav-text">7-3、常见约束        √</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#八、TCL语言的学习"><span class="nav-number">8.</span> <span class="nav-text">八、TCL语言的学习</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#8-1、事务的分类"><span class="nav-number">8.1.</span> <span class="nav-text">8-1、事务的分类</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#8-2、使用到的关键字"><span class="nav-number">8.2.</span> <span class="nav-text">8-2、使用到的关键字</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#8-3、事务的隔离级别"><span class="nav-number">8.3.</span> <span class="nav-text">8-3、事务的隔离级别</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#九、视图的讲解-√"><span class="nav-number">9.</span> <span class="nav-text">九、视图的讲解           √</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#9-1、视图的创建"><span class="nav-number">9.1.</span> <span class="nav-text">9-1、视图的创建</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#9-2、视图的增删改查"><span class="nav-number">9.2.</span> <span class="nav-text">9-2、视图的增删改查</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#9-3、某些视图不能更新"><span class="nav-number">9.3.</span> <span class="nav-text">9-3、某些视图不能更新</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#9-4、视图逻辑的更新"><span class="nav-number">9.4.</span> <span class="nav-text">9-4、视图逻辑的更新</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#9-5、视图的删除"><span class="nav-number">9.5.</span> <span class="nav-text">9-5、视图的删除</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#9-6、视图结构的查看"><span class="nav-number">9.6.</span> <span class="nav-text">9-6、视图结构的查看</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#十、变量"><span class="nav-number">10.</span> <span class="nav-text">十、变量</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#10-1、系统变量"><span class="nav-number">10.1.</span> <span class="nav-text">10-1、系统变量</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#10-2、自定义变量"><span class="nav-number">10.2.</span> <span class="nav-text">10-2、自定义变量</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#10-3、系统变量和自定义变量区别"><span class="nav-number">10.3.</span> <span class="nav-text">10-3、系统变量和自定义变量区别</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#十一、存储过程和函数"><span class="nav-number">11.</span> <span class="nav-text">十一、存储过程和函数</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#11-1、创建存储过程"><span class="nav-number">11.1.</span> <span class="nav-text">11-1、创建存储过程</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#11-2、调用存储过程"><span class="nav-number">11.2.</span> <span class="nav-text">11-2、调用存储过程</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#11-3、创建函数"><span class="nav-number">11.3.</span> <span class="nav-text">11-3、创建函数</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#11-4、调用函数"><span class="nav-number">11.4.</span> <span class="nav-text">11-4、调用函数</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#11-5、函数和存储过程的区别"><span class="nav-number">11.5.</span> <span class="nav-text">11-5、函数和存储过程的区别</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#十二、流程控制结构"><span class="nav-number">12.</span> <span class="nav-text">十二、流程控制结构</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#12-1、分支"><span class="nav-number">12.1.</span> <span class="nav-text">12-1、分支</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#12-2、循环"><span class="nav-number">12.2.</span> <span class="nav-text">12-2、循环</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      
	  
	  

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        
<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ta 的笑很甜</span>
  
  <div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>

  

  
</div>




  <!--<div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>-->



  <!--<span class="post-meta-divider">|</span>-->



  <!--
  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.0.0</div>
	-->




<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共34.1k字</span>
</div>
        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>














  
    
    
  
  <script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script>













  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.0"></script>

  <script src="/js/src/motion.js?v=7.0.0"></script>



  
  


  <script src="/js/src/schemes/muse.js?v=7.0.0"></script>




  
  <script src="/js/src/scrollspy.js?v=7.0.0"></script>
<script src="/js/src/post-details.js?v=7.0.0"></script>



  


  <script src="/js/src/bootstrap.js?v=7.0.0"></script>



  


  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      
        // ref: https://github.com/ForbesLindesay/unescape-html
        var unescapeHtml = function(html) {
          return String(html)
            .replace(/&quot;/g, '"')
            .replace(/&#39;/g, '\'')
            .replace(/&#x3A;/g, ':')
            // replace all the other &#x; chars
            .replace(/&#(\d+);/g, function (m, p) { return String.fromCharCode(p); })
            .replace(/&lt;/g, '<')
            .replace(/&gt;/g, '>')
            .replace(/&amp;/g, '&');
        };
      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                content = unescapeHtml(content);
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  
  
  <script>
    
    function addCount(Counter) {
      var $visitors = $('.leancloud_visitors');
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url }) })
        .done(function({ results }) {
          if (results.length > 0) {
            var counter = results[0];
            
            Counter('put', '/classes/Counter/' + counter.objectId, JSON.stringify({ time: { '__op': 'Increment', 'amount': 1 } }))
            
              .done(function() {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.time + 1);
              })
            
              .fail(function ({ responseJSON }) {
                console.log(`Failed to save Visitor num, with error message: ${responseJSON.error}`);
              })
          } else {
            
              Counter('post', '/classes/Counter', JSON.stringify({ title: title, url: url, time: 1 }))
                .done(function() {
                  var $element = $(document.getElementById(url));
                  $element.find('.leancloud-visitors-count').text(1);
                })
                .fail(function() {
                  console.log('Failed to create');
                });
            
          }
        })
        .fail(function ({ responseJSON }) {
          console.log(`LeanCloud Counter Error: ${responseJSON.code} ${responseJSON.error}`);
        });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + 'Gj7jigLH3i0BVIoM8r2Kni4s-gzGzoHsz')
        .done(function({ api_server }) {
          var Counter = function(method, url, data) {
            return $.ajax({
              method: method,
              url: 'https://' + api_server + '/1.1' + url,
              headers: {
                'X-LC-Id': 'Gj7jigLH3i0BVIoM8r2Kni4s-gzGzoHsz',
                'X-LC-Key': 'B6g16KgId51NWVhW3TElBj1O',
                'Content-Type': 'application/json',
              },
              data: data
            });
          };
          
            addCount(Counter);
          
        });
    });
  </script>



  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
<script type="text/javascript" src="/js/src/love.js"></script>
<script type="text/javascript" src="/js/src/dynamic_bg.js"></script>